# HH Auto Response (Chrome Extension)

Расширение для автоматического отклика на вакансии на hh.ru с учётом сопроводительного письма и лимита количества откликов.

## Для пользователя

### Установка
1. Откройте `chrome://extensions`.
2. Включите «Режим разработчика».
3. Нажмите «Загрузить распакованное» и выберите папку проекта `hh_response` (где лежит `manifest.json`).

### Как пользоваться
1. Авторизуйтесь на hh.ru, настройте фильтр и откройте страницу с результатами поиска вакансий.
2. Кликните по иконке расширения:
   - Введите сопроводительное письмо (можно оставить пустым).
   - Задайте лимит откликов (по умолчанию 200).
   - Нажмите «Старт». Расширение поочерёдно откликнется на карточки, при необходимости перейдёт на следующие страницы.
3. Чтобы остановить — снова откройте попап и нажмите «Стоп».

### Памятка
- Работайте на странице списка вакансий, будучи залогиненным на hh.ru.
- Держите вкладку активной: скрипт кликает по DOM и переходит по страницам.
- Статус и прогресс — в попапе; логи — в консоли вкладки (`[HH Auto Response]`).
- Если видите капчу/замедление — увеличьте паузу или снизьте лимит в попапе. Тайминги регулируются в `content.js` (`TIMING`).
- Расширение пропускает карточки без кнопки «Откликнуться» или уводящие на отдельную страницу отклика.
- Если в модалке сопроводительное обязательное, а текст не задан — карточка пропускается.
- Одна и та же карточка не обрабатывается повторно (запоминается по ссылке/идентификатору).
- Карточки, ведущие на отдельную страницу отклика, помечаются и больше не трогаются.

## Для разработчиков

### Что делает
- На странице выдачи ищет карточки вакансий по `data-qa="vacancy-serp__vacancy"`.
- Кликает «Откликнуться»; если открылась модалка:
  - При наличии текста добавляет сопроводительное (`data-qa="vacancy-response-popup-form-letter-input"`).
  - Жмёт «Откликнуться» в модалке (`data-qa="vacancy-response-submit-popup"` или поиск по тексту).
- Если после клика происходит переход на `/applicant/vacancy_response`, скрипт делает `history.back()` (или открывает исходный URL) и продолжает.
- После обхода карточек жмёт следующую страницу пагинации (`data-qa="pager-page"`) до достижения лимита.
- Запоминает URL страницы выдачи перед кликом (чтобы вернуться при навигации на страницу отклика).
- Пропускает карточку, если модалка требует обязательное сопроводительное, а текст пуст.
- Запоминает обработанные карточки, чтобы не кликать по ним повторно после возврата со страницы отклика.
- При возврате со страницы отклика игнорирует URL, который снова ведёт на `/applicant/vacancy_response` (использует сохранённый список/`referrer` или общий поиск).
- Если клик по карточке уводит на отдельную страницу отклика, карточка помечается как navigation-only и больше не обрабатывается.

### Тайминг
- Пауза между откликами: 2–3 с + джиттер 200–700 мс.
- Короткие паузы вокруг кликов/вставки текста; все значения в `content.js` в константе `TIMING`.

### Технические детали
- Состояние (активность, лимит, сопроводительное, прогресс) хранится в `sessionStorage` вкладки и подхватывается после перехода на новую страницу.
- Селекторы опираются на `data-qa`; есть резервный поиск кнопок по тексту «Откликнуться».
- Логи в консоли страницы с префиксом `[HH Auto Response]`.
